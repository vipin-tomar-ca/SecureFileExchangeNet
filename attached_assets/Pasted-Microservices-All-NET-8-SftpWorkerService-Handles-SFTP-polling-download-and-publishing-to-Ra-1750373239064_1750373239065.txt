Microservices (All .NET 8)

SftpWorkerService â€“ Handles SFTP polling, download, and publishing to RabbitMQ

FileProcessorService â€“ Consumes file messages, parses records, calls validation service

BusinessRulesService â€“ A gRPC microservice that validates file content with per-vendor rules

EmailNotificationService â€“ Sends email reports of internal discrepancies

IssueEmailMonitorService â€“ Polls IMAP inbox for vendor emails reporting issues

ðŸ“š Shared Libraries

Contracts â€“ Protobuf schemas and DTOs

Common â€“ Encryption, logging, retry logic, pluggable serializers

VendorConfig â€“ Configuration and rules per vendor

ðŸ“¦ Messaging

RabbitMQ with TLS, DLQ, retries

ðŸ”’ Security

SFTP with SSH keys, TLS 1.2+

SMTP/IMAP with STARTTLS or 3rd party email API

AES-256 encryption at rest

Mutual TLS for gRPC

ðŸ“Š Observability

OpenTelemetry for tracing

Serilog for logging (to Seq or ELK)

Health endpoints on all services

ðŸ”„ Process Flow (E2E)

SftpWorkerService pulls files from configured vendor SFTP

File metadata is published to file.received queue as FileReceivedMessage

FileProcessorService consumes and parses file, then calls BusinessRulesService over gRPC

If discrepancies found, EmailNotificationService formats and sends notification

Meanwhile, IssueEmailMonitorService listens to mailbox for emails from vendors and publishes ThirdPartyIssueReportedMessage

FileIssueProcessorService logs and links external issues to file records

ðŸ“‚ Project Structure

SecureFileExchange.sln
â”‚
â”œâ”€â”€ SftpWorkerService (.NET Worker)
â”œâ”€â”€ FileProcessorService (.NET Worker)
â”œâ”€â”€ BusinessRulesService (.NET gRPC Service)
â”œâ”€â”€ EmailNotificationService (.NET Worker)
â”œâ”€â”€ IssueEmailMonitorService (.NET Worker)
â”‚
â”œâ”€â”€ Contracts (Protobuf/DTOs)
â”œâ”€â”€ Common (Utils, Serializers, Retry, Email)
â”œâ”€â”€ VendorConfig (Per-vendor settings)
â””â”€â”€ Tests (xUnit/NUnit)

ðŸ§¾ User Stories & Tasks

ðŸ‘¤ As a Platform Admin

I want to onboard a new vendor via config file or UI

I want to define validation rules for each vendor

I want to receive alerts when a file fails validation

ðŸ‘¤ As a System

I want to download files from each vendor over SFTP securely

I want to validate and route file data to appropriate business rules

I want to notify operations if an issue is found

I want to log and persist all steps for auditing

I want to listen for incoming issue reports via email

